{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/pages/llamada/llamada.component.html","webpack:///src/app/pages/llamada/llamada.component.ts","webpack:///src/app/pages/login/login.component.ts","webpack:///src/app/pages/login/login.component.html","webpack:///src/app/pipes/modify-name.pipe.ts","webpack:///src/app/services/app-llamada.guard.service.ts","webpack:///src/app/services/sockets-status.service.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts","webpack:///ws (ignored)"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","APP_ROUTES","path","component","canActivate","pathMatch","redirectTo","ModuleRoutes","forRoot","imports","AppComponent","sockets","title","selector","templateUrl","styleUrls","config","url","options","AppModule","declarations","providers","bootstrap","LlamadaComponent","socketsService","router","camaraAbierta","spinner","obtenerUsuariosVideollamada","getUsuariosConnect","obtenerStreamUsuario","emitMessage","navigator","mediaDevices","getUserMedia","audio","video","width","height","stream","videoObject","document","getElementsByTagName","srcObject","streamVivo","interval","setInterval","capturarFotoUser","image","imagen","clearInterval","console","log","err","message","fire","icon","getTracks","stop","localStorage","getItem","removeItem","navigateByUrl","listenServidorObtenerUsuarios","subscribe","data","users","usuariosConectadosVideollamada","imageUserHTML","getElementById","src","userExit","listenStreamUsuario","htmlTag","canvas","createElement","setAttribute","context","getContext","drawImage","foto","toDataURL","LoginComponent","nameUsuario","socketStatus","length","user","name","_id","listenServidorIngresUsuario","ingreso","setItem","loginUser","ModifyNamePipe","nameModify","split","toUpperCase","substr","AppLlamadaGuards","getToken","providedIn","SocketsStatusService","socket","detectStatusSockets","on","evento","payload","callback","emit","fromEvent","environment","production","bootstrapModule","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","\r\n  import { RouterModule, Routes } from '@angular/router';\r\n  import { NgModule } from '@angular/core';\r\n\r\n  // pages\r\n  import { LoginComponent } from './pages/login/login.component';\r\n  import { LlamadaComponent } from './pages/llamada/llamada.component';\r\n\r\n  // guards\r\n  import { AppLlamadaGuards } from '@services/app-llamada.guard.service';\r\n\r\n\r\n  const APP_ROUTES: Routes = [\r\n    { path: '', component: LoginComponent },\r\n    { path: 'app', component: LlamadaComponent,  canActivate : [ AppLlamadaGuards ] },\r\n    { path: '**', pathMatch: 'full', redirectTo: '' }\r\n  ];\r\n\r\n  @NgModule({\r\n    imports : [ RouterModule.forRoot(APP_ROUTES) ],\r\n    exports : [ RouterModule ]\r\n  })\r\n\r\n  export class ModuleRoutes {}\r\n","import { Component } from '@angular/core';\nimport { SocketsStatusService } from '@services/sockets-status.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'videollamada-app';\n\n  constructor(public sockets : SocketsStatusService){\n  }\n\n}\n","\n  <!-- rutas -->\n  <router-outlet></router-outlet>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule  } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n// environments\nimport { environment } from '@environments/environment';\n\n// angular material\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\n\n\n// sockets\nimport { SocketIoConfig, SocketIoModule } from 'ngx-socket-io';\nconst config : SocketIoConfig = { url : environment.url, options : {} };\n\n// pipes\nimport { ModifyNamePipe } from './pipes/modify-name.pipe';\n\n// rutas\nimport { ModuleRoutes } from './app-routing';\n\n\nimport { AppComponent } from './app.component';\nimport { LoginComponent } from './pages/login/login.component';\nimport { LlamadaComponent } from './pages/llamada/llamada.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    LoginComponent,\n    LlamadaComponent,\n    ModifyNamePipe\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    MatToolbarModule,\n    MatButtonModule,\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatProgressSpinnerModule,\n    SocketIoModule.forRoot(config),\n    ModuleRoutes\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","\n<div class=\"container_principal animated fadeIn fast\">\n\n  <aside class=\"sidebar\">\n\n    <h4>Usuarios conectados</h4>\n    <ul *ngIf=\"usuariosConectadosVideollamada\">\n      <li *ngFor=\"let usuario of usuariosConectadosVideollamada\">\n        <i class=\"fas fa-circle icon_connect\"></i>{{ usuario.name | modifyName }}\n      </li>\n    </ul>\n\n  </aside>\n\n  <section class=\"videollamada_section\">\n\n    <div>\n      <video id=\"player\" autoplay *ngIf=\"camaraAbierta\"></video>\n      <img src=\"assets/noimage.png\" alt=\"noimage\" height=\"200\" *ngIf=\"!camaraAbierta\">\n\n      <section class=\"spinner\" *ngIf=\"spinner\">\n        <mat-spinner color=\"accent\"></mat-spinner>\n      </section>\n\n      <button *ngIf=\"!camaraAbierta\" mat-raised-button color=\"primary\" (click)=\"abrirCamara()\">\n        <i class=\"fa fa-camera\"></i>\n        Abrir camara\n      </button>\n\n      <button *ngIf=\"camaraAbierta\" mat-raised-button color=\"warn\" (click)=\"pararCamara()\">\n        <i class=\"fas fa-stop-circle\"></i>\n        Parar camara y salir\n      </button>\n\n\n      <img id=\"stream-user\">\n    </div>\n\n\n\n\n  </section>\n\n\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { SocketsStatusService } from '@services/sockets-status.service';\nimport { Router } from '@angular/router';\nimport Swal from 'sweetalert2';\n\n@Component({\n  selector: 'app-llamada',\n  templateUrl: './llamada.component.html',\n  styleUrls: ['./llamada.component.css']\n})\nexport class LlamadaComponent implements OnInit {\n  public usuariosConectadosVideollamada : [{name : string, _id : string}];\n  public camaraAbierta : boolean = false;\n  public streamVivo : any;\n  public interval : any;\n  public spinner : boolean = false;\n\n  constructor(public socketsService : SocketsStatusService, public router : Router) { }\n\n  ngOnInit(): void {\n    this.obtenerUsuariosVideollamada();\n    this.getUsuariosConnect();\n    this.obtenerStreamUsuario();\n  }\n\n  obtenerUsuariosVideollamada(){\n    this.socketsService.emitMessage('obtener-usuarios');\n  };\n\n   abrirCamara(){\n\n    if( navigator.mediaDevices ){\n          this.camaraAbierta = true;\n\n          this.spinner = true;\n          navigator.mediaDevices.getUserMedia({ audio : true, video : { width : 200, height : 200 } })\n                   .then(async(stream) => {\n                     let videoObject : any = document.getElementsByTagName('video');\n                     videoObject[0].srcObject = stream;\n                     this.streamVivo = stream;\n\n                     this.spinner = false;\n                     this.interval = setInterval(async () => {\n                        try {\n                          const image = await this.capturarFotoUser(videoObject[0]);\n\n                          // emitir stream de datos\n                          this.socketsService.emitMessage('stream-data', {imagen : image});\n\n                        } catch(err) {\n                            clearInterval(this.interval);\n                            this.spinner = false;\n                            console.log('Error en stream de usuario', err);\n                        }\n\n                      }, 70);\n\n                   })\n                   .catch((err:Error) => {\n                     console.log(err);\n                     this.spinner = false;\n                     this.camaraAbierta = false;\n                     if( err.message == 'Permission denied' ){\n                        Swal.fire({\n                           icon : 'info',\n                           title : 'Para acceder a la videollamada debes permitir la utilizacion de la camara y audio'\n                        })\n                     };\n\n                     if(err.message == 'Could not start video source'){\n                         Swal.fire({\n                            icon : 'info',\n                            title : 'Existe un problema con tu camara'\n                         })\n                     }\n                   });\n\n    } else {\n        console.log('No soportado');\n    }\n  };\n\n  pararCamara(){\n    if(this.streamVivo){\n      this.streamVivo.getTracks()[0].stop();\n      this.streamVivo.getTracks()[1].stop();\n      clearInterval(this.interval);\n\n      this.socketsService.emitMessage('salir-videollamada', localStorage.getItem('user'));\n      localStorage.removeItem('user');\n      this.router.navigateByUrl('/');\n    }\n  };\n\n  getUsuariosConnect(){\n    this.socketsService.listenServidorObtenerUsuarios().subscribe((\n      data : {users:[{name : string, _id : string}], userExit : string}) => {\n\n      if(data.users) this.usuariosConectadosVideollamada = data.users;\n      else (this.usuariosConectadosVideollamada as any) = data;\n\n      let imageUserHTML : any = document.getElementById('stream-user');\n      if( imageUserHTML && imageUserHTML.src ){\n            imageUserHTML.src = '';\n      }\n\n      if( data.userExit && localStorage.getItem('user') ){\n        Swal.fire({\n          title: `${ data.userExit } ha salido de la sesion`,\n          icon : 'info'\n        });\n      }\n\n\n    })\n\n  };\n\n  obtenerStreamUsuario(){\n    let imageUserHTML : any = document.getElementById('stream-user');\n\n    this.socketsService.listenStreamUsuario().subscribe(imagen => {\n      imageUserHTML.src = imagen;\n    });\n  };\n\n\n  capturarFotoUser(htmlTag): Promise<string>{\n    let canvas = document.createElement('canvas');\n\n    canvas.setAttribute('width', '280');\n    canvas.setAttribute('height', '280');\n\n    let context = canvas.getContext('2d');\n\n    context.drawImage(htmlTag, 0, 0, canvas.width, canvas.height);\n\n    let foto = context.canvas.toDataURL();\n    canvas = null;\n    context = null;\n\n    return Promise.resolve(foto);\n  };\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { SocketsStatusService } from '@services/sockets-status.service';\nimport { uuid } from 'uuidv4';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n\n  constructor(public sockets : SocketsStatusService, public router : Router) {\n  }\n\n  ngOnInit(): void {\n    if( localStorage.getItem('user') ) {\n      this.sockets.emitMessage('salir-videollamada', localStorage.getItem('user'));\n      localStorage.removeItem('user');\n    }\n\n\n  }\n\n  loginUser(nameUsuario : string){\n\n    if(this.sockets.socketStatus && nameUsuario.length > 0){\n\n      // crear el objecto con datos del usuario\n      const user = { name : nameUsuario, _id : uuid() };\n\n      // guardar info en servidor de usuario\n      this.sockets.emitMessage('usuario-conectado', user);\n\n      // redirecionar a la vista de llamada\n      this.sockets.listenServidorIngresUsuario().subscribe((ingreso:{ingreso:boolean}) => {\n        localStorage.setItem('user', nameUsuario);\n        if( ingreso ) this.router.navigateByUrl('/app');\n        else return;\n      });\n\n    } else { return };\n\n  };\n\n\n}\n","\n<mat-toolbar color=\"primary\" class=\"animated fadeIn fast\">\n  <mat-toolbar-row>\n    <span>\n      <i class=\"fas fa-video\"></i>\n      VideoChat\n    </span>\n  </mat-toolbar-row>\n</mat-toolbar>\n\n  <div class=\"div_name animated fadeIn fast\">\n\n    <mat-form-field>\n      <input matInput placeholder=\"Ingresa tu nombre....\" #nameInput autocomplete=\"off\">\n    </mat-form-field>\n\n    <button mat-raised-button color=\"primary\" [ngClass]=\"{'bloqueado' : !sockets.socketStatus, 'habilitado' : sockets.socketStatus}\"\n    (click)=\"loginUser(nameInput.value)\">\n      Ingresar\n      <i class=\"fas fa-sign-in-alt\"></i>\n    </button>\n\n  </div>\n","\r\n  import { PipeTransform, Pipe } from '@angular/core';\r\n\r\n  @Pipe({\r\n    name : 'modifyName'\r\n  })\r\n\r\n  export class ModifyNamePipe implements PipeTransform {\r\n\r\n    constructor(){}\r\n\r\n    transform( name : string): string {\r\n      let nameModify = name.split(' ')[0][0].toUpperCase() + name.split(' ')[0].substr(1);\r\n\r\n      return nameModify;\r\n    }\r\n\r\n\r\n\r\n  }\r\n","\r\n  import { Injectable } from '@angular/core';\r\n  import { CanActivate, Router } from '@angular/router';\r\n\r\n  @Injectable({\r\n    providedIn : 'root'\r\n  })\r\n\r\n  export class AppLlamadaGuards implements CanActivate {\r\n\r\n    constructor(public router : Router){\r\n    }\r\n\r\n    getToken(): Boolean{\r\n      return !!localStorage.getItem('user');\r\n    }\r\n\r\n    canActivate(){\r\n      if( this.getToken() ){\r\n          return true;\r\n      } else {\r\n          this.router.navigateByUrl('/');\r\n          return false;\r\n      }\r\n    }\r\n\r\n  }\r\n","\r\n  import { Injectable } from '@angular/core';\r\n  import { Socket } from 'ngx-socket-io';\r\n  import { Router } from '@angular/router';\r\n\r\n  @Injectable({\r\n    providedIn : 'root'\r\n  })\r\n\r\n  export class SocketsStatusService {\r\n\r\n    public socketStatus = false;\r\n\r\n    constructor(public socket : Socket, private router : Router){\r\n      this.detectStatusSockets();\r\n    }\r\n\r\n    detectStatusSockets(){\r\n      this.socket.on('connect', () => {\r\n        this.socketStatus = true;\r\n      });\r\n\r\n      this.socket.on('disconnect', () => {\r\n        if(localStorage.getItem('user')){\r\n            this.emitMessage('salir-videollamada', localStorage.getItem('user'));\r\n            localStorage.removeItem('user');\r\n        }\r\n        this.router.navigateByUrl('/');\r\n\r\n        this.socketStatus = false;\r\n      });\r\n    };\r\n\r\n    emitMessage(evento : string, payload? : any, callback? : Function ){\r\n        this.socket.emit(evento, payload, callback);\r\n    };\r\n\r\n    listenServidorIngresUsuario(){\r\n     return this.socket.fromEvent('permitir-ingreso');\r\n    };\r\n\r\n    listenServidorObtenerUsuarios(){\r\n     return this.socket.fromEvent('obtener-usuarios');\r\n    };\r\n\r\n    listenStreamUsuario(){\r\n      return this.socket.fromEvent('stream-usuario');\r\n    }\r\n\r\n\r\n  }\r\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  url : 'https://server-videollamada-app.herokuapp.com/'\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","/* (ignored) */"]}